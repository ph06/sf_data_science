<center><img src=https://raw.githubusercontent.com/AndreyRysistov/DatasetsForPandas/main/hh%20label.jpg alt="drawing" width="400"/></center>

# Проект 2. Анализ вакансий из HeadHunter

## Оглавление  
1. [Описание проекта](#Описание-проекта)
2. [Описание данных](#Описание-данных)
3. [Зависимости](#Зависимости)
4. [Установка](#Установка-проекта)
5. [Использование](#Использование)
6. [Авторы](#Авторы)
7. [Выводы](#Выводы)

## Описание проекта
Представьте, что вы устроились на работу в кадровое агентство, которое подбирает вакансии для *IT*-специалистов. Ваш первый проект — создание модели машинного обучения, которая будет рекомендовать вакансии клиентам агентства, претендующим на позицию *Data Scientist*. Сначала вам необходимо понять, что из себя представляют данные и насколько они соответствуют целям проекта. В литературе эта часть работы над *ML*-проектом называется *Data Understanding*, или анализ данных.

**ОРГАНИЗАЦИОННАЯ ИНФОРМАЦИЯ**

Наш проект будет состоять из нескольких этапов:

* знакомство с данными;
* предварительный анализ данных;
* детальный анализ вакансий;
* анализ работодателей;
* предметный анализ;
* дополнительный анализ данных.

**Данный проект** направлен на демонстрацию применения различных методов анализа данных (*Data Understanding*) на примере работы с *SQL*-базой данных вакансий, выгруженной с сайта поиска вакансий [HeadHunter](https://hh.ru).

**О структуре проекта:**
* [Project-2.ipynb](./Project-2.ipynb) - jupyter-ноутбук, содержащий код проекта, в котором демонстрируется применение различных методы анализа данных. **ВНИМАНИЕ!** Для корректного отображения интерактивных графиков Plotly в онлайне, необходимо использовать специальный сервис [nbviewer](https://nbviewer.org/github/ph06/sf_data_science/blob/main/project_2/Project-2.ipynb)
* [requirements.txt](./requirements.txt) и [.python-version](./.python-version) - вспомогательные файлы для воспроизводимости среды выполнения


## Описание данных
Все необходимые таблицы находятся в схеме *public* базы данных *project_sql* удаленного сервера RDBMS **PostgreSQL**.

Взаимосвязи таблиц:
<center><img src=./images/all_tables_links.png alt="drawing" width="400"/></center>

**VACANCIES**

Таблица хранит в себе данные по вакансиям и содержит следующие столбцы:
<img src=./images/vacancies.png alt="drawing" width="600"/>

Зарплатная вилка — это верхняя и нижняя граница оплаты труда в рублях (зарплаты в других валютах уже переведены в рубли). Соискателям она показывает, в каком диапазоне компания готова платить сотруднику на этой должности.<br>

**AREAS**

Таблица-справочник, которая хранит код региона и его название.<br>
<img src=./images/areas.png alt="drawing" width="600"/>

**EMPLOYERS**

Таблица-справочник со списком работодателей.<br>
<img src=./images/employers.png alt="drawing" width="600"/>

**INDUSTRIES**

Таблица-справочник вариантов сфер деятельности работодателей.<br>
<img src=./images/industries.png alt="drawing" width="600"/>

**EMPLOYERS_INDUSTRIES**

Дополнительная таблица, которая существует для организации связи между работодателями и сферами их деятельности.

Эта таблица нужна нам, поскольку у одного работодателя может быть несколько сфер деятельности (или работодатели могут вовсе не указать их). Для удобства анализа необходимо хранить запись по каждой сфере каждого работодателя в отдельной строке таблицы.<br>
<img src=./images/employers_industries.png alt="drawing" width="600"/>

## Зависимости
* Python (3.12.2 - использовался менеджер версий pyenv):
    * [pandas (2.2.2)](https://pandas.pydata.org)
    * [Psycopg (3.1.19)](https://www.psycopg.org/psycopg3/)
    * [SQLAlchemy (2.0.30)](https://www.sqlalchemy.org)
    * [Plotly Express (5.22.0)](https://plotly.com/python/plotly-express/)
    * [python-dotenv (1.0.1)](https://github.com/theskumar/python-dotenv)
    * [Requests (2.31.0)](https://github.com/psf/requests/)
    * [BeautifulSoup (4.12.3)](https://www.crummy.com/software/BeautifulSoup/)


## Установка проекта
```
git clone https://github.com/ph06/sf_data_science/tree/main/project_2
pyenv install 3.12.2
pip install -r requirements.txt
```

## Использование
Вся информация о работе представлена в jupyter-ноутбуке [Project-2.ipynb](./Project-2.ipynb).

**ВНИМАНИЕ!**
Для корректного отображения интерактивных графиков Plotly в онлайне, необходимо использовать специальный сервис [nbviewer](https://nbviewer.org/github/ph06/sf_data_science/blob/main/project_2/Project-2.ipynb)

## Авторы
* [Phobius](https://github.com/ph06/)


## Выводы
В результате выполнения данного *Проекта* были отработаны базовые навыки применения различных методов анализа данных (*Data Understanding*) - необходимую часть работы над *ML*-проектом: знакомство с данными, предварительный анализ данных, детальный анализ вакансий, анализ работодателей и предметный анализ. Проведен дополнительный анализ данных в части определения дубликатов работодателей и установления ошибок в эталонных шаблонах отбора данных. Дополнительно проведен анализ проблемы таймаута *Задания №5.2* при реализации запроса с помощью группировки - проведен анализ проблемы, добавлены недостающие индексы (на собственном сервере) и *SQL*-запрос переписан с использованием механизма подзапросов, что уменьшило выполнение *SQL*-запроса до **~32 мс** (более чем в **2100** раз). При написании jupyter-ноутбука были использованы рекомендации соглашения **PEP 8** по оформлению исходного кода и комментариев. Оформление *SQL*-запросов выполнено с выдерживанием одинакового стиля с наличием комментариев. Для интерактивной визуализации гистограмм статистического анализа зарплатных вилок была использована библиотека Plotly Express, а также сторонняя платформа по визуализации jupyter-ноутбуков с использованием данных библиотек - [nbviewer](https://nbviewer.org/github/ph06/sf_data_science/blob/main/project_2/Project-2.ipynb).